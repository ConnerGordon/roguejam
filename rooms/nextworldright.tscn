[gd_scene format=3 uid="uid://btfuli38h0osr"]

[ext_resource type="Script" uid="uid://d0qgp36xucgvd" path="res://rooms/currlevel.gd" id="1_xpu7g"]
[ext_resource type="PackedScene" uid="uid://xo534iykaw0s" path="res://player/node_3d.tscn" id="2_r137e"]
[ext_resource type="MeshLibrary" uid="uid://db21ofkxjnyfe" path="res://meshlibrary/mainmesh.meshlib" id="3_5n48o"]
[ext_resource type="Script" uid="uid://yxvtijrgn2l2" path="res://grid_map.gd" id="4_5n48o"]
[ext_resource type="PackedScene" uid="uid://b5afoavo0v3rb" path="res://player/upgrade_manager.tscn" id="4_y5ql7"]
[ext_resource type="PackedScene" uid="uid://b07rrbcve7u6u" path="res://enemy/enemybase.tscn" id="5_y5ql7"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_37dr8"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_hxh21"]
sky_material = SubResource("ProceduralSkyMaterial_37dr8")

[sub_resource type="Environment" id="Environment_4qpal"]
background_mode = 2
sky = SubResource("Sky_hxh21")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_r137e"]
albedo_color = Color(0.05882353, 0.40784314, 1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xpu7g"]
albedo_color = Color(0.67513067, 0, 0.001037314, 1)

[node name="base_world" type="Node3D" unique_id=1758586049]
script = ExtResource("1_xpu7g")

[node name="camerapos" type="Node3D" parent="." unique_id=451608260]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -40.048187, 26.244556, 38.742188)

[node name="camerapos2" type="Node3D" parent="." unique_id=117308110]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.475026, 19.502893, 1.7698269)

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=655791832]
environment = SubResource("Environment_4qpal")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=1107977062]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="player" parent="." unique_id=2002233893 instance=ExtResource("2_r137e")]
transform = Transform3D(0.99999994, 0, 0, 0, 0.99999994, 0, 0, 0, 1, -79.87273, 86.59564, 32.760612)

[node name="rotatebase" type="Node3D" parent="." unique_id=1178578798]
transform = Transform3D(0.70710677, 0, 0.70710677, 0, 1, 0, -0.70710677, 0, 0.70710677, 0, 0, 0)

[node name="GridMap" type="GridMap" parent="rotatebase" unique_id=1184075899]
mesh_library = ExtResource("3_5n48o")
cell_size = Vector3(4, 2, 4)
cell_center_y = false
bake_navigation = true
data = {
"cells": PackedInt32Array(1, 65530, 0, 0, 65530, 0, 65535, 65530, 0, 65534, 65529, 0, 65533, 65529, 0, 65532, 65529, 0, 65531, 65529, 0, 65530, 65529, 0, 65529, 65529, 0, 65529, 65528, 0, 65528, 65528, 0, 65533, 65528, 0, 2, 65533, 0, 1, 65533, 0, 1, 65534, 0, 0, 65534, 0, 1, 2, 0, 1, 0, 0, 2, 0, 0, 3, 1, 0, 3, 2, 0, 3, 3, 0, 2, 3, 0, 1, 3, 0, 1, 65535, 0, 2, 65535, 0, 3, 65535, 0, 4, 65535, 0, 5, 0, 0, 6, 1, 0, 6, 2, 0, 5, 2, 0, 4, 2, 0, 2, 2, 0, 1, 1, 0, 2, 1, 0, 4, 1, 0, 5, 1, 0, 4, 0, 0, 3, 0, 0, 2, 65534, 0, 3, 65534, 0, 4, 65534, 0, 5, 65534, 0, 5, 65535, 0, 6, 0, 0, 6, 65535, 0, 6, 65534, 0, 6, 65533, 0, 6, 65532, 0, 5, 65532, 0, 5, 65533, 0, 4, 65533, 0, 3, 65533, 0, 65535, 65534, 0, 65534, 65534, 0, 65531, 65534, 0, 65530, 65534, 0, 65529, 65534, 0, 65532, 65534, 0, 65533, 65534, 0, 65530, 65533, 0, 65529, 65533, 0, 65531, 65533, 0, 4, 65532, 0, 3, 65532, 0, 2, 65532, 0, 1, 65532, 0, 0, 65531, 0, 65535, 65531, 0, 65534, 65531, 0, 65533, 65531, 0, 65532, 65531, 0, 65532, 65532, 0, 65531, 65532, 0, 65530, 65532, 0, 65530, 65531, 0, 65529, 65531, 0, 65529, 65532, 0, 65528, 65532, 0, 65527, 65532, 0, 65527, 65531, 0, 65526, 65531, 0, 65526, 65532, 0, 65525, 65532, 0, 65524, 65532, 0, 65532, 65533, 0, 65533, 65533, 0, 65534, 65533, 0, 65535, 65532, 0, 0, 65532, 0, 65534, 65532, 0, 0, 65533, 0, 65535, 65533, 0, 65533, 65532, 0, 1, 4, 0, 2, 4, 0, 3, 4, 0, 4, 4, 0, 5, 4, 0, 6, 4, 0, 6, 3, 0, 5, 3, 0, 4, 3, 0, 6, 65531, 0, 6, 65530, 0, 6, 65529, 0, 5, 65529, 0, 4, 65529, 0, 3, 65529, 0, 2, 65529, 0, 1, 65529, 0, 0, 65529, 0, 65535, 65529, 0, 65528, 65529, 0, 65527, 65529, 0, 65526, 65529, 0, 65525, 65529, 0, 65524, 65529, 0, 65524, 65530, 0, 65524, 65531, 0, 65525, 65531, 0, 65527, 65530, 0, 65528, 65530, 0, 65529, 65530, 0, 65530, 65530, 0, 65531, 65530, 0, 65532, 65530, 0, 65533, 65530, 0, 65534, 65530, 0, 3, 65530, 0, 4, 65530, 0, 5, 65530, 0, 5, 65531, 0, 4, 65531, 0, 3, 65531, 0, 2, 65531, 0, 1, 65531, 0, 2, 65530, 0, 65531, 65531, 0, 65528, 65531, 0, 65526, 65530, 0, 65525, 65530, 0, 65523, 65529, 0, 65523, 65528, 0, 65524, 65528, 0, 65525, 65528, 0, 65526, 65528, 0, 65527, 65528, 0, 65530, 65528, 0, 65531, 65528, 0, 65532, 65528, 0, 65534, 65528, 0, 65535, 65528, 0, 0, 65528, 0, 1, 65528, 0, 2, 65528, 0, 3, 65528, 0, 4, 65528, 0, 5, 65528, 0, 6, 65528, 0, 65523, 65530, 0, 65522, 65530, 0, 65521, 65530, 0, 65522, 65529, 0, 65522, 65528, 0, 65521, 65528, 0, 65521, 65529, 0, 65523, 65531, 0, 65523, 65532, 0, 65522, 65532, 0, 65521, 65532, 0, 65521, 65531, 0, 65522, 65531, 0, 1, 5, 0, 2, 5, 0, 3, 5, 0, 4, 5, 0, 5, 5, 0, 5, 6, 0, 6, 6, 0, 6, 7, 0, 5, 8, 0, 4, 8, 0, 3, 8, 0, 3, 7, 0, 2, 7, 0, 2, 6, 0, 1, 6, 0, 1, 7, 0, 1, 8, 0, 1, 9, 0, 2, 9, 0, 2, 10, 0, 2, 11, 0, 2, 12, 0, 1, 11, 0, 6, 5, 0, 6, 8, 0, 5, 9, 0, 5, 10, 0, 6, 10, 0, 6, 11, 0, 6, 12, 0, 6, 13, 0, 6, 14, 0, 6, 15, 0, 6, 16, 0, 5, 14, 0, 4, 13, 0, 4, 12, 0, 3, 12, 0, 3, 11, 0, 3, 10, 0, 4, 14, 0, 4, 11, 0, 4, 10, 0, 3, 9, 0, 5, 13, 0, 4, 9, 0, 3, 6, 0, 4, 7, 0, 5, 7, 0, 6, 9, 0, 4, 6, 0, 2, 8, 0, 1, 10, 0, 5, 11, 0, 5, 12, 0, 5, 15, 0, 5, 16, 0, 4, 16, 0, 4, 15, 0, 3, 14, 0, 3, 13, 0, 2, 13, 0, 3, 15, 0, 3, 16, 0, 65521, 65527, 0, 65522, 65526, 0, 65523, 65526, 0, 65524, 65526, 0, 65525, 65526, 0, 65526, 65525, 0, 65527, 65525, 0, 65528, 65525, 0, 65529, 65525, 0, 65530, 65525, 0, 65531, 65525, 0, 65532, 65524, 0, 65533, 65524, 0, 65534, 65524, 0, 65535, 65523, 0, 0, 65523, 0, 1, 65523, 0, 2, 65523, 0, 3, 65523, 0, 4, 65523, 0, 4, 65524, 0, 5, 65524, 0, 5, 65525, 0, 5, 65526, 0, 5, 65527, 0, 65521, 65524, 0, 65521, 65525, 0, 65521, 65526, 0, 65522, 65524, 0, 65522, 65525, 0, 65522, 65527, 0, 65523, 65524, 0, 65523, 65525, 0, 65523, 65527, 0, 65524, 65524, 0, 65524, 65525, 0, 65524, 65527, 0, 65525, 65524, 0, 65525, 65525, 0, 65525, 65527, 0, 65526, 65524, 0, 65526, 65526, 0, 65526, 65527, 0, 65527, 65524, 0, 65527, 65526, 0, 65527, 65527, 0, 65528, 65524, 0, 65528, 65526, 0, 65528, 65527, 0, 65529, 65524, 0, 65529, 65526, 0, 65529, 65527, 0, 65530, 65524, 0, 65530, 65526, 0, 65530, 65527, 0, 65531, 65524, 0, 65531, 65526, 0, 65531, 65527, 0, 65532, 65525, 0, 65532, 65526, 0, 65532, 65527, 0, 65533, 65525, 0, 65533, 65526, 0, 65533, 65527, 0, 65534, 65525, 0, 65534, 65526, 0, 65534, 65527, 0, 65535, 65524, 0, 65535, 65525, 0, 65535, 65526, 0, 65535, 65527, 0, 0, 65524, 0, 0, 65525, 0, 0, 65526, 0, 0, 65527, 0, 1, 65524, 0, 1, 65525, 0, 1, 65526, 0, 1, 65527, 0, 2, 65524, 0, 2, 65525, 0, 2, 65526, 0, 2, 65527, 0, 3, 65524, 0, 3, 65525, 0, 3, 65526, 0, 3, 65527, 0, 4, 65525, 0, 4, 65526, 0, 4, 65527, 0, 5, 65523, 0, 6, 65523, 0, 6, 65524, 0, 6, 65525, 0, 6, 65526, 0, 6, 65527, 0, 7, 65523, 0, 7, 65524, 0, 7, 65525, 0, 7, 65526, 0, 7, 65527, 0, 7, 65528, 0, 7, 65529, 0, 7, 65530, 0, 7, 65531, 0, 7, 65532, 0, 7, 65533, 0, 7, 65534, 0, 8, 65523, 0, 8, 65524, 0, 8, 65525, 0, 8, 65526, 0, 8, 65527, 0, 8, 65528, 0, 8, 65529, 0, 8, 65530, 0, 8, 65531, 0, 8, 65532, 0, 8, 65533, 0, 8, 65534, 0, 9, 65523, 0, 9, 65524, 0, 9, 65525, 0, 9, 65526, 0, 9, 65527, 0, 9, 65528, 0, 9, 65529, 0, 9, 65530, 0, 9, 65531, 0, 9, 65532, 0, 9, 65533, 0, 9, 65534, 0, 10, 65523, 0, 10, 65524, 0, 10, 65525, 0, 10, 65526, 0, 10, 65527, 0, 10, 65528, 0, 10, 65529, 0, 10, 65530, 0, 10, 65531, 0, 10, 65532, 0, 10, 65533, 0, 10, 65534, 0, 11, 65523, 0, 11, 65524, 0, 11, 65525, 0, 11, 65526, 0, 11, 65527, 0, 11, 65528, 0, 11, 65529, 0, 11, 65530, 0, 11, 65531, 0, 11, 65532, 0, 11, 65533, 0, 11, 65534, 0, 12, 65523, 0, 12, 65524, 0, 12, 65525, 0, 12, 65526, 0, 12, 65527, 0, 12, 65528, 0, 12, 65529, 0, 12, 65530, 0, 12, 65531, 0, 12, 65532, 0, 12, 65533, 0, 12, 65534, 0)
}
script = ExtResource("4_5n48o")
Encount = 1
enemy = ExtResource("5_y5ql7")

[node name="CSGBox3D" type="CSGBox3D" parent="rotatebase" unique_id=11778641]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10.4818325, 0)
use_collision = true
size = Vector3(500, 1, 500)

[node name="mapping" type="Node3D" parent="rotatebase" unique_id=1841812081]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -8.121061, 0)

[node name="flooring" type="Node3D" parent="rotatebase/mapping" unique_id=549509208]

[node name="CSGBox3D" type="CSGBox3D" parent="rotatebase/mapping/flooring" unique_id=1439974826]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.96181, 6.0980897, -30.062527)
use_collision = true
size = Vector3(111.8114, 1, 36)
material = SubResource("StandardMaterial3D_r137e")

[node name="CSGBox3D3" type="CSGBox3D" parent="rotatebase/mapping/flooring" unique_id=441227170]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.988608, 6.190016, -8.008147)
use_collision = true
size = Vector3(77.88574, 1, 8.133789)

[node name="CSGBox3D6" type="CSGBox3D" parent="rotatebase/mapping/flooring" unique_id=170634320]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 24.203026, 6.1987867, -50.057312)
use_collision = true
size = Vector3(55.851563, 1, 4)

[node name="CSGBox3D4" type="CSGBox3D" parent="rotatebase/mapping/flooring" unique_id=485063749]
transform = Transform3D(-1.1920929e-07, 0, 1.0000001, 0, 1, 0, -1.0000001, 0, -1.1920929e-07, 10.490641, 6.0967417, 50.32202)
use_collision = true
size = Vector3(10, 1, 4.1816406)

[node name="CSGBox3D5" type="CSGBox3D" parent="rotatebase/mapping/flooring" unique_id=1297304954]
transform = Transform3D(-1.1920929e-07, 0, 1.0000001, 0, 1, 0, -1.0000001, 0, -1.1920929e-07, 8.0191145, 6.113016, 21.987526)
use_collision = true
size = Vector3(52.133392, 1, 8.091064)

[node name="CSGBox3D2" type="CSGBox3D" parent="rotatebase/mapping/flooring" unique_id=1172020651]
transform = Transform3D(-8.940697e-08, 0, -1, 0, 1, 0, 1, 0, -8.940697e-08, 19.858295, 6.229042, 7.9170237)
use_collision = true
size = Vector3(120, 1, 16)
material = SubResource("StandardMaterial3D_xpu7g")

[node name="walling" type="Node3D" parent="rotatebase/mapping" unique_id=864380208]

[node name="CSGBox3D2" type="CSGBox3D" parent="rotatebase/mapping/walling" unique_id=835309303]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -31.891747, 12.193924, -48.51159)
use_collision = true
size = Vector3(56.384136, 11.209839, 1)

[node name="CSGBox3D3" type="CSGBox3D" parent="rotatebase/mapping/walling" unique_id=1374000466]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 24.140678, 12.34728, -52.50995)
use_collision = true
size = Vector3(55.788597, 11.251526, 1)

[node name="CSGBox3D6" type="CSGBox3D" parent="rotatebase/mapping/walling" unique_id=2106335875]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 40.425537, 12.176518, -3.377966)
use_collision = true
size = Vector3(23.148897, 11.593048, 1)

[node name="CSGBox3D4" type="CSGBox3D" parent="rotatebase/mapping/walling" unique_id=1490273262]
transform = Transform3D(-8.940697e-08, 0, 1, 0, 1, 0, -1, 0, -8.940697e-08, 52.37199, 12.046147, -28.133175)
use_collision = true
size = Vector3(48.78795, 11.85379, 1)

[node name="CSGBox3D5" type="CSGBox3D" parent="rotatebase/mapping/walling" unique_id=765848878]
transform = Transform3D(-8.940697e-08, 0, 1, 0, 1, 0, -1, 0, -8.940697e-08, 28.362955, 12.34728, 32.015194)
use_collision = true
size = Vector3(71.9063, 11.251526, 1)

[node name="CSGBox3D" type="CSGBox3D" parent="rotatebase/mapping/walling" unique_id=1239801325]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.1560593, 12.27468, -50.192947)
use_collision = true
size = Vector3(1, 11.1605835, 3.7098389)

[node name="props" type="Node3D" parent="rotatebase" unique_id=478014470]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20.417608, 7.0462093, 67.30051)

[node name="upgradeManager" parent="." unique_id=282005707 instance=ExtResource("4_y5ql7")]
